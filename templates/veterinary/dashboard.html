{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>{% if language == 'mr' %}‡§™‡§∂‡•Å‡§µ‡•à‡§¶‡•ç‡§Ø‡§ï‡•Ä‡§Ø ‡§µ‡§ø‡§≠‡§æ‡§ó{% else %}Veterinary Department{% endif %}</h1>
        <div class="header-actions">
            {% if user.user_type == 'admin' %}
            <a href="{% url 'doctor_create' %}" class="btn btn-primary">
                {% if language == 'mr' %}+ ‡§®‡§µ‡•Ä‡§® ‡§°‡•â‡§ï‡•ç‡§ü‡§∞{% else %}+ Add Doctor{% endif %}
            </a>
            {% endif %}
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: #3b82f6;">üë®‚Äç‚öïÔ∏è</div>
            <div class="stat-info">
                <h3>{{ total_doctors }}</h3>
                <p>{% if language == 'mr' %}‡§°‡•â‡§ï‡•ç‡§ü‡§∞{% else %}Doctors{% endif %}</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: #10b981;">üíâ</div>
            <div class="stat-info">
                <h3>{{ pending_ai }}</h3>
                <p>{% if language == 'mr' %}‡§™‡•ç‡§∞‡§≤‡§Ç‡§¨‡§ø‡§§ AI{% else %}Pending AI{% endif %}</p>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: #f59e0b;">üêÑ</div>
            <div class="stat-info">
                <h3>{{ active_pregnancies }}</h3>
                <p>{% if language == 'mr' %}‡§ó‡§∞‡•ç‡§≠‡§µ‡§§‡•Ä ‡§ó‡§æ‡§Ø{% else %}Pregnant Cows{% endif %}</p>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="dashboard-grid">
        <div class="dashboard-card">
            <h2>{% if language == 'mr' %}‡§¶‡•ç‡§∞‡•Å‡§§ ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ{% else %}Quick Actions{% endif %}</h2>
            <div class="action-buttons">
                <a href="{% url 'doctor_list' %}" class="action-btn">
                    <span class="action-icon">üë®‚Äç‚öïÔ∏è</span>
                    <span>{% if language == 'mr' %}‡§°‡•â‡§ï‡•ç‡§ü‡§∞{% else %}Doctors{% endif %}</span>
                </a>
                <a href="{% url 'ai_list' %}" class="action-btn">
                    <span class="action-icon">üíâ</span>
                    <span>{% if language == 'mr' %}‡§ï‡•É‡§§‡•ç‡§∞‡§ø‡§Æ ‡§∞‡•á‡§§‡§®{% else %}AI Records{% endif %}</span>
                </a>
                <a href="{% url 'pregnancy_list' %}" class="action-btn">
                    <span class="action-icon">üêÑ</span>
                    <span>{% if language == 'mr' %}‡§ó‡§∞‡•ç‡§≠‡§ß‡§æ‡§∞‡§£‡§æ{% else %}Pregnancy{% endif %}</span>
                </a>
                <a href="{% url 'vaccination_list' %}" class="action-btn">
                    <span class="action-icon">üíä</span>
                    <span>{% if language == 'mr' %}‡§≤‡§∏‡•Ä‡§ï‡§∞‡§£{% else %}Vaccination{% endif %}</span>
                </a>
            </div>
        </div>

        <div class="dashboard-card">
            <h2>{% if language == 'mr' %}‡§Ö‡§≤‡•Ä‡§ï‡§°‡•Ä‡§≤ ‡§≠‡•á‡§ü‡•Ä{% else %}Recent Visits{% endif %}</h2>
            {% if recent_visits %}
            <div class="recent-list">
                {% for visit in recent_visits %}
                <div class="recent-item">
                    <div class="recent-info">
                        <strong>{{ visit.cow.cow_number }}</strong>
                        <span class="text-muted">{{ visit.visit_type }}</span>
                    </div>
                    <div class="recent-date">{{ visit.visit_date }}</div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p class="text-muted">{% if language == 'mr' %}‡§ï‡•ã‡§£‡§§‡•Ä‡§π‡•Ä ‡§≠‡•á‡§ü ‡§®‡§æ‡§π‡•Ä{% else %}No visits yet{% endif %}</p>
            {% endif %}
        </div>
    </div>

    <!-- Upcoming Vaccinations -->
    <div class="dashboard-card">
        <h2>{% if language == 'mr' %}‡§Ü‡§ó‡§æ‡§Æ‡•Ä ‡§≤‡§∏‡•Ä‡§ï‡§∞‡§£{% else %}Upcoming Vaccinations{% endif %}</h2>
        {% if upcoming_vaccinations %}
        <table class="table">
            <thead>
                <tr>
                    <th>{% if language == 'mr' %}‡§ó‡§æ‡§Ø ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï{% else %}Cow Number{% endif %}</th>
                    <th>{% if language == 'mr' %}‡§≤‡§∏{% else %}Vaccine{% endif %}</th>
                    <th>{% if language == 'mr' %}‡§¶‡•á‡§Ø ‡§§‡§æ‡§∞‡•Ä‡§ñ{% else %}Due Date{% endif %}</th>
                    <th>{% if language == 'mr' %}‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ{% else %}Actions{% endif %}</th>
                </tr>
            </thead>
            <tbody>
                {% for vaccination in upcoming_vaccinations %}
                <tr>
                    <td>{{ vaccination.cow.cow_number }}</td>
                    <td>{{ vaccination.vaccine_name }}</td>
                    <td>{{ vaccination.next_due_date }}</td>
                    <td>
                        <a href="{% url 'cow_detail' vaccination.cow.pk %}" class="btn btn-sm btn-info">
                            {% if language == 'mr' %}‡§™‡§π‡§æ{% else %}View{% endif %}
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="text-muted">{% if language == 'mr' %}‡§ï‡•ã‡§£‡§§‡•á‡§π‡•Ä ‡§Ü‡§ó‡§æ‡§Æ‡•Ä ‡§≤‡§∏‡•Ä‡§ï‡§∞‡§£ ‡§®‡§æ‡§π‡•Ä{% else %}No upcoming vaccinations{% endif %}</p>
        {% endif %}
    </div>
</div>

<style>
.action-buttons {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.action-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 1.5rem;
    background: #f8f9fa;
    border-radius: 8px;
    text-decoration: none;
    color: #333;
    transition: all 0.3s;
}

.action-btn:hover {
    background: #e9ecef;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.action-icon {
    font-size: 2rem;
}

.recent-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.recent-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem;
    background: #f8f9fa;
    border-radius: 6px;
}

.recent-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.recent-date {
    color: #6c757d;
    font-size: 0.875rem;
}
</style>
{% endblock %}
